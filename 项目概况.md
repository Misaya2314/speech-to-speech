# FlowMind 语音对话应用

## 项目概述

FlowMind 是一个开源的模块化语音对话应用，旨在提供类似 GPT4-o 的语音交互体验。该项目由后端语音处理管道和前端桌面应用界面两部分组成，支持多种语言的实时语音对话，并提供本地知识库集成能力。

## 核心功能

1. **语音识别与转写**：通过先进的语音识别模型将用户语音实时转为文本
2. **语言模型处理**：使用大型语言模型进行智能对话回复
3. **语音合成**：将文本回复转换为自然流畅的语音输出
4. **多语言支持**：支持英文、中文、法语、西班牙语、日语、韩语等多种语言
5. **本地知识库**：可集成本地知识库，实现基于特定领域知识的对话能力
6. **工程风格界面**：提供具有专业工程软件风格的用户界面
7. **实时状态监控**：显示系统资源使用情况和处理状态

## 技术架构

### 后端模块 (speech-to-speech)

后端采用模块化设计，包含四个主要处理环节：

1. **语音活动检测(VAD)**：使用 Silero VAD v5 检测语音输入
2. **语音转文本(STT)**：支持多种模型实现
   - Whisper 系列模型
   - Lightning Whisper MLX
   - Paraformer (FunASR)
   - FasterWhisper
3. **语言模型(LLM)**：支持多种模型实现
   - Hugging Face 上的指令型模型
   - mlx-lm (适用于 Mac)
   - OpenAI API
4. **文本转语音(TTS)**：支持多种合成引擎
   - Parler-TTS
   - MeloTTS
   - ChatTTS
   - FacebookMMS TTS

### 前端模块 (speech-to-speech-ui)

前端采用现代桌面应用技术栈：

1. **UI 框架**：Vue.js 3 + TypeScript
2. **桌面应用框架**：Electron
3. **构建工具**：Vite
4. **UI 组件库**：Element Plus
5. **状态管理**：Pinia
6. **通信协议**：WebSocket

## 项目结构

### 后端核心模块

- **VAD**：语音活动检测模块
- **STT**：语音转文本模块
- **LLM**：语言模型处理模块
- **TTS**：文本转语音模块
- **s2s_pipeline.py**：语音处理管道主程序
- **connections**：处理网络连接的模块
- **utils**：工具函数集合

### 前端组件

- **AppHeader**：应用头部导航栏
- **ChatWindow**：对话窗口，显示交互内容
- **ControlPanel**：控制面板，提供操作按钮
- **SettingsPanel**：设置面板，配置系统参数
- **KnowledgeManager**：知识库管理界面
- **HistoryPanel**：历史记录查看面板

## 部署方式

该项目支持多种部署和运行方式：

1. **Docker 容器**：通过 docker-compose 快速部署
2. **服务器/客户端模式**：分离运行处理服务和客户端
3. **本地单机模式**：在单一设备上运行完整系统
4. **桌面应用**：封装为易于安装的桌面应用程序

## 技术特点

1. **严格的模块化设计**：各组件独立开发和测试，通过标准接口集成
2. **多设备优化**：针对不同硬件平台(CUDA、MPS)进行性能优化
3. **流式处理**：支持音频输出流式传输，减少响应延迟
4. **易于扩展**：可轻松替换或添加新的模型实现
5. **丰富的配置选项**：提供详细的命令行参数，满足不同使用场景

## 开发状态

项目目前正在积极开发中，已完成：

- 后端语音处理管道的核心功能
- 前端桌面应用的基础框架和主要界面
- 多语言支持和模型集成
- WebSocket 通信机制

正在进行的工作：

- 本地知识库集成
- 性能优化
- 用户体验改进
- 跨平台兼容性测试

## 系统要求

- **后端**：Python 3.8+，相关依赖见 requirements.txt
- **前端**：Node.js 14+，Electron 22+
- **硬件**：建议使用 GPU 加速(NVIDIA CUDA 或 Apple MPS)

## 许可证

项目采用开源许可证，具体条款详见 LICENSE 文件。
